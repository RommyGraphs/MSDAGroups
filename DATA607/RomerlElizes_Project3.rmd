---
title: "DATA607 - Project 3 - Meeting 2 Findings"
output:
  html_document:
    highlight: pygments
    theme: cerulean
  pdf_document: default
  word_document: default
---

### Author: Romerl Elizes

# Synopsis

## Summary

Loaded the data directly from data.world website. 

Only chose one csv file THOR_WWII_DATA_CLEAN.csv because it contained the most information.

Removed unnecessary fields because they contained either no information or useless information for the scope of this project.

Separate data frames (FOR NOW) to just ETO and PTO operations.

Summarized data for all team members to see.

## Findings and Opportunities

I removed a large number of columns because I felt that they were not necessary OR that they yield too many blank and NA data. Examples are: "TGT_COUNTRY_CODE","TGT_ID","TGT_INDUSTRY_CODE","SOURCE_LATITUDE","SOURCE_LONGITUDE","MDS","TAKEOFF_LATITUDE","TAKEOFF_LONGITUDE","TARGET_COMMENT","MISSION_COMMENTS","SOURCE","DATABASE_EDIT_COMMENTS", "BDA", "CALLSIGN", "ROUNDS_AMMO", "SPARES_RETURN_AC","WX_FAIL_AC", "MECH_FAIL_AC", "MISC_FAIL_AC", "TIME_OVER_TARGET","SIGHTING_METHOD_CODE","SIGHTING_EXPLANATION".

I reduced the data frame by only counting ETO and PTO data. I also reduced the number of columns to 38.

Number of operations were 59,359 and 23,837 for ETO and PTO respectively.

Altitude of bombing missions were higher in ETO than PTO. Perhaps the German AA were more accurate than the Japanese AA.

In ETO, Great Britain and USA share almost identical number of bombing missions at 15081 and 14605 respectively. In PTO, The USA overwhelming has more bombing missions at 23,406.


## Recommendations

Proceed with this data given the time constraints we have.

Combine both data frames into one big uber data frame containing only ETO and PTO bombing operations.

Eliminate the following fields from the tables because they may not seem important OR that data is too sparse: WWII_ID, MASTER_INDEX_NUMBER, AC_LOST, AC_DAMAGED,  TGT_INDUSTRY, TGT_PRIORITY_EXPLANATION,TAKEOFF_BASE, TAKEOFF_COUNTRY. This will reduce the data to 30 fields.

We could further reduce the size of the table to focus on bombing operations for a specific date range or year.

Normalize the table by exporting bombers and weaponry to their own separate tables.

Since the remaining data is in a database of your own choosing, we can conduct simple and advanced SQL queries to answer some questions we may have on the data. We could agree on what queries we want to conduct and do our own analyses and combine them together.

# Tasks

## I. Load Appropriate Libraries

```{r load-libraries, eval=TRUE}
library(stringr)
library(tidyr)
library(dplyr)
library(ggplot2)
```

## II. Load Data

Loading of THOR_WWII_DATA_CLEAN.csv directly from data.world website.

```{r load-data, eval=TRUE}
# ref: [HOW]
urlfile <- "https://query.data.world/s/7tdvewopqdr5mu4zwlqeuy4c7nyeco"
tableWW2 <- read.table(file = urlfile, header = TRUE, fill = TRUE, sep = ",")
```

## III. Clean Data

Removing unnecessary fields.

```{r cleandataframe, eval=TRUE}
tableWW2 <- tableWW2[, -which(names(tableWW2) %in% c("TGT_COUNTRY_CODE","TGT_ID","TGT_INDUSTRY_CODE","SOURCE_LATITUDE","SOURCE_LONGITUDE","MDS","TAKEOFF_LATITUDE","TAKEOFF_LONGITUDE","TARGET_COMMENT","MISSION_COMMENTS","SOURCE","DATABASE_EDIT_COMMENTS", "BDA", "CALLSIGN", "ROUNDS_AMMO", "SPARES_RETURN_AC","WX_FAIL_AC", "MECH_FAIL_AC", "MISC_FAIL_AC", "TIME_OVER_TARGET","SIGHTING_METHOD_CODE","SIGHTING_EXPLANATION"))]
```

Separating data frame into two theaters: European and Pacific

```{r separatingdataframe, eval=TRUE}
tableWW2ETO <- subset(tableWW2, THEATER == "ETO")
tableWW2PTO <- subset(tableWW2, THEATER == "PTO")
```

## IV-A. Summmary for ETO Data Frame
```{r summarizedataframeETO, eval=TRUE}
summary(tableWW2ETO)
```

## IV-B. Summmary for PTO Data Frame
```{r summarizedataframePTO, eval=TRUE}
summary(tableWW2PTO)
```

## V. Questions about Data

## V-A. What are the allocation of bombers used in ETO and PTO?
```{r aircraftdistributionETO, eval=TRUE, fig.width = 10, fig.height = 7}
ETOAircrafttype <- as.data.frame(table(tableWW2ETO$AIRCRAFT_NAME))
names(ETOAircrafttype) <- c("Aircraft", "Count")
ETOAircrafttype <- ETOAircrafttype[-which(ETOAircrafttype$Count == 0 ), ] # removing rows with 0 fields 
ggplot(ETOAircrafttype, aes(x = reorder(Aircraft, -Count), y = Count)) + 
  geom_bar(stat = "identity", position = "dodge", fill = "green") +
  geom_text(aes(label=Count), vjust=1.6, color="black", position = position_dodge(0.9), size=3.5) +
  scale_fill_brewer(palette="Paired") + 
  theme(axis.text.x=element_text(angle = 90, vjust = 0.5)) +
  ggtitle("ETO Aircraft Types") +
  labs(x = "Aircraft Type")
```

```{r aircraftdistributionPTO, eval=TRUE, fig.width = 10, fig.height = 7}
PTOAircrafttype <- as.data.frame(table(tableWW2PTO$AIRCRAFT_NAME))
names(PTOAircrafttype) <- c("Aircraft", "Count")
PTOAircrafttype <- PTOAircrafttype[-which(PTOAircrafttype$Count == 0 ), ] # removing rows with 0 fields 
ggplot(PTOAircrafttype, aes(x = reorder(Aircraft, -Count), y = Count)) + 
  geom_bar(stat = "identity", position = "dodge", fill = "red") +
  geom_text(aes(label=Count), vjust=1.6, color="black", position = position_dodge(0.9), size=3.5) +
  scale_fill_brewer(palette="Paired") + 
  theme(axis.text.x=element_text(angle = 90, vjust = 0.5)) +
  ggtitle("PTO Aircraft Types") +
  labs(x = "Aircraft Type")
```

## V-B.What are the allocation of tons of explosives of target countries in ETO and PTO?

```{r tonsexplosivescountrydistributionETO, eval=TRUE, fig.width = 10, fig.height = 7}
ETOExplosives <- tableWW2ETO[, which(names(tableWW2ETO) %in% c("TGT_COUNTRY","TOTAL_TONS"))]
ETOExplosives <- ETOExplosives[!(is.na(ETOExplosives$TOTAL_TONS) | ETOExplosives$TOTAL_TONS==""), ]
head(ETOExplosives, n=100)
#ETOExplosives %>%
#  group_by(TGT_COUNTRY) %>%
#  summarise(TOTAL_TONS = sum(TOTAL_TONS))
```


## V-C. What is the dispersion of target countries for either ETO and PTO?

```{r targetcountrydistributionETO, eval=TRUE, fig.width = 10, fig.height = 7}
ETOTCountry <- as.data.frame(table(tableWW2ETO$TGT_COUNTRY))
names(ETOTCountry) <- c("Country", "Missions")
ETOTCountry <- ETOTCountry[-which(ETOTCountry$Missions == 0 ), ] # removing rows with 0 fields 
ggplot(ETOTCountry, aes(x = reorder(Country, -Missions), y = Missions)) + 
  geom_bar(stat = "identity", position = "dodge", fill = "green") +
  geom_text(aes(label=Missions), vjust=1.6, color="black", position = position_dodge(0.9), size=3.5) +
  scale_fill_brewer(palette="Paired") + 
  theme(axis.text.x=element_text(angle = 90, vjust = 0.5)) +
  ggtitle("ETO Missions by Target Country") +
  labs(x = "Target Countries")
```

```{r targetcountrydistributionPTO, eval=TRUE, fig.width = 10, fig.height = 7}
PTOTCountry <- as.data.frame(table(tableWW2PTO$TGT_COUNTRY))
names(PTOTCountry) <- c("Country", "Missions")
PTOTCountry <- PTOTCountry[-which(PTOTCountry$Missions == 0 ), ] # removing rows with 0 fields 
ggplot(PTOTCountry, aes(x = reorder(Country, -Missions), y = Missions)) + 
  geom_bar(stat = "identity", position = "dodge", fill = "green") +
  geom_text(aes(label=Missions), vjust=1.6, color="black", position = position_dodge(0.9), size=3.5) +
  scale_fill_brewer(palette="Paired") + 
  theme(axis.text.x=element_text(angle = 90, vjust = 0.5)) +
  ggtitle("PTO Missions by Target Country") +
  labs(x = "Target Countries")
```


Mass Bomb dates (bombings greater than 400) for ETO are 8/15, 7/25, 2/22, 8/25, 8/14, and 7/20 1944. Why? Notice that Pre-Day bombardment dates are not Mass Bomb dates.

Mass Bomb dates (bombings greater than 100) for PTO are 6/21, 3/13, 4/25, 2/14, 4/26, and 4/15 1945. Notice that the number of bombing missions for these dates are 1/4 the number than that of the ETO. Also, all mass bomb dates occurred in 1945. Why?

As expected in ETO operations, Germany was the target country with the largest number of bombing missions. However, according to the PTO data, the Philippines was the target country with the largest number of bombing missions. Japan, an Axis opponent, had been the recipient of less than half of that of the Philippines. Why?

Does bombing tonnage increase for a specific period and what theater?




